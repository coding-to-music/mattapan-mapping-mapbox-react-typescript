(this["webpackJsonpmattapan-mapping-mapbox-react-typescript"]=this["webpackJsonpmattapan-mapping-mapbox-react-typescript"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var i,r,a,o,c,s,l,d,u,b,p,h,f,m,j,g,x=n(0),v=n.n(x),O=n(70),y=n.n(O),_=(n(86),n(114)),w=n(11),S=n(76),k=n(110),C=(n(87),n(111)),z=n(113),N=new C.a({uri:"",cache:new z.a}),M={spacing:{xs:"4px",s:"8px",m:"16px",l:"24px",xl:"32px",xxl:"40px"},mediaQuery:{tablet:"576px",desktop:"921px"},fonts:{fontFamily:{header:"'Baron Neue', sans-serif",body:"'Lato', sans-serif"},fontWeight:{bold:700,semiBold:500,regular:400},fontSize:{headline:"72px",subHeadline:"60px",title:"40px",subtitle:"32px",large:"24px",regular:"16px",small:"12px"}},colors:{peach:"#FEC0AA",green:"#226653",teal:"#2A9D8F",orange:"#ED5D31",brown:"#4D4319",red:"#D32F2F",blue:"#B4DAF9",black:"#000000",white:"#FFFFFF"},map:{street:"mapbox://styles/mapbox/streets-v11",outdoor:"mapbox://styles/mapbox/outdoors-v11",light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/mapbox/dark-v10",satellite:"mapbox://styles/mapbox/satellite-v9",satelliteStreet:"mapbox://styles/mapbox/satellite-streets-v11",navigationDay:"mapbox://styles/mapbox/navigation-day-v1",navigationNight:"mapbox://styles/mapbox/navigation-night-v1"}},A=n(6),F=n(8),E=n(2),D=F.a.a(i||(i=Object(A.a)(["\n    display: inline-block;\n    text-decoration: none;\n"]))),H=F.a.span(r||(r=Object(A.a)(["\n    padding: 0 ",";\n    font-family: ",";\n    font-size: ",";\n    color: ",";\n    transition: color ease .2s;\n\n    &:hover {\n        color: ",";\n    }\n"])),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.regular}),(function(e){return e.theme.colors.black}),(function(e){return e.color})),B=F.a.span(a||(a=Object(A.a)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n    padding: 0 ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle}),(function(e){return e.theme.fonts.fontWeight.bold}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.spacing.s})),I=function(e){var t=e.href,n=e.children,i=e.color;return Object(E.jsxs)(D,{href:t,children:[" ",Object(E.jsx)(H,{color:i,children:n})]})},P=function(e){var t=e.href,n=e.children;return Object(E.jsx)(D,{target:"_blank",href:t,children:n})},T=n.p+"static/media/mattapan_mapping_logo_2.f5c2e6bf.svg",L=F.a.div(o||(o=Object(A.a)(["\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  width: 100px;\n  height: 100px;\n"]))),q=Object(F.a)(L)(c||(c=Object(A.a)(["\n\twidth: 200px;\n\theight: 200px;\n"]))),Z=Object(F.a)(L)(s||(s=Object(A.a)(["\n  background-image: url('https://tinyurl.com/57ftrcev');\n"]))),Q=Object(F.a)(L)(l||(l=Object(A.a)(["\n  background-image: url('https://tinyurl.com/jra96rec');\n"]))),V=Object(F.a)(q)(d||(d=Object(A.a)(["\n  background-image: url(",");\n"])),T),R=F.a.div(u||(u=Object(A.a)(["\n\tdisplay: none;\n\n\t@media (min-width: ",") {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet})),J=F.a.div(b||(b=Object(A.a)(["\n\theight: 100px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n"]))),U=function(e){var t=e.className;return Object(E.jsxs)(J,{className:t,children:[Object(E.jsx)(R,{children:Object(E.jsx)(D,{href:"/",children:Object(E.jsx)(V,{})})}),Object(E.jsx)(D,{href:"/",color:M.colors.black,children:Object(E.jsx)(B,{children:"Mattapan Boston"})}),Object(E.jsxs)("div",{children:[Object(E.jsx)(I,{href:"/about",color:M.colors.blue,children:"About"}),Object(E.jsx)(I,{href:"/explore",color:M.colors.blue,children:"Explore"}),Object(E.jsx)(I,{href:"/story",color:M.colors.peach,children:"MapBox"}),Object(E.jsx)(I,{href:"/meet",color:M.colors.teal,children:"Meet"}),Object(E.jsx)(I,{href:"/share",color:M.colors.orange,children:"Share"}),Object(E.jsx)(I,{href:"/act",color:M.colors.red,children:"Act"})]})]})},G=F.a.div(p||(p=Object(A.a)(["\n  height: 250px;\n  background-color: #4c4141;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  /* FIXME: also styles HeaderTitle */\n  span {\n    font-family: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.colors.white})),K=F.a.div(h||(h=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),X=function(e){var t=e.className;return Object(E.jsxs)(G,{className:t,children:[Object(E.jsx)(B,{children:"Mattapan Boston"}),Object(E.jsx)(K,{children:Object(E.jsxs)(R,{children:[Object(E.jsx)(P,{href:"https://powerfulpathways.org/",children:Object(E.jsx)(Z,{})})," |",Object(E.jsx)(P,{href:"https://www.codeforboston.org/",children:Object(E.jsx)(Q,{})})]})}),Object(E.jsxs)(K,{children:[Object(E.jsx)("span",{children:"About"}),Object(E.jsx)("span",{children:"Contact"}),Object(E.jsx)("span",{children:"Donate"})]}),Object(E.jsxs)(K,{children:[Object(E.jsx)("span",{children:"For Media"}),Object(E.jsx)("span",{children:"Careers"}),Object(E.jsx)("span",{children:"Newsletter"})]})]})},Y=F.a.div(f||(f=Object(A.a)(["\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n"]))),W=F.a.div(m||(m=Object(A.a)(["\n  /* TODO: wrap in component selector */\n  flex-grow: 1;\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),$=Object(F.a)(U)(j||(j=Object(A.a)(["\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),ee=Object(F.a)(X)(g||(g=Object(A.a)(["\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),te=function(e){var t=e.children;return Object(E.jsxs)(Y,{children:[Object(E.jsx)($,{}),Object(E.jsx)(W,{children:t}),Object(E.jsx)(ee,{})]})};function ne(){return Object(E.jsx)(te,{children:Object(E.jsx)("h1",{children:"About"})})}function ie(){return Object(E.jsx)(te,{children:Object(E.jsx)("h1",{children:"Contact"})})}var re,ae,oe,ce,se,le,de,ue,be,pe,he,fe,me,je,ge,xe,ve,Oe,ye,_e,we=n(37),Se=n.n(we),ke=n(52),Ce=n(36),ze=n(16),Ne=n(9),Me=[{id:"greaterMattapanZoning",file:"./boundaries/greater_mattapan_zoning.json",color:M.colors.peach,visible:!1},{id:"zoningSubdistricts",file:"./boundaries/1Zoning_Subdistricts.geojson",color:M.colors.peach,visible:!1},{id:"dotHpZoningSubdistricts",file:"./boundaries/Dot_HP_Zoning_Subdistricts.json",color:M.colors.peach,visible:!1},{id:"greaterMattapanMergedPoly",file:"./boundaries/Greater_Mattapan_Merged_Poly.json",color:M.colors.peach,visible:!1},{id:"greaterMattapanNeighborhoodLine",file:"./boundaries/Greater_Mattapan_Neighborhood_Line.json",color:M.colors.blue,visible:!1},{id:"mattapanNeighborhood",file:"./boundaries/mattapan_neighborhood.json",color:M.colors.blue,visible:!1},{id:"mattapanSquare",file:"./boundaries/Mattapan_Square_qtr_mile.json",color:M.colors.teal,visible:!1},{id:"mattapanZoningSubdistricts",file:"./boundaries/Mattapan_Zoning_subdistricts.geojson",color:M.colors.blue,visible:!1},{id:"mattapanPlanningDistrict",file:"./boundaries/mattapan_planning_district.json",color:M.colors.blue,visible:!1},{id:"mattapanPlanBoundary",file:"./boundaries/PLAN_Mattapan_Poly.json",color:M.colors.blue,visible:!1},{id:"mortonStCorridor",file:"./boundaries/Morton_St_Corridor.json",color:M.colors.orange,visible:!1},{id:"riverStCorridor",file:"./boundaries/River_St_Corridor_FeaturesTo.json",color:M.colors.orange,visible:!1},{id:"cummimnsHwyCorridor",file:"./boundaries/Cummins_Hwy_Corridor.json",color:M.colors.orange,visible:!1},{id:"blueHillAveCorridor",file:"./boundaries/Blue_Hill_Ave_Corridor.json",color:M.colors.orange,visible:!1},{id:"subDistricts",file:"./boundaries/sd.json",color:M.colors.blue,visible:!1},{id:"transportLayer",file:"./boundaries/BTD_transportation_projects.geojson",color:M.colors.orange,visible:!1}],Ae=function(e){return e.reduce((function(e,t){return Object.assign(e,Object(Ce.a)({},t.id,t.visible))}),{})},Fe=[{name:"Housing",color:M.colors.orange,visible:["greaterMattapanZoning","dotHpZoningSubdistricts","mattapanSquare"]},{name:"How is Land Used",color:M.colors.green,visible:["cummimnsHwyCorridor","mattapanPlanBoundary","mattapanSquare"]},{name:"New to Mattapan",color:M.colors.blue,visible:["blueHillAveCorridor","greaterMattapanMergedPoly","zoningSubdistricts"]},{name:"Mattapan Love Stories",color:M.colors.brown,visible:["subDistricts","riverStCorridor","mattapanZoningSubdistricts"]}],Ee=F.a.span(re||(re=Object(A.a)(["\n  color: ",";\n"])),(function(e){return e.color})),De=Object(F.a)(Ee)(ae||(ae=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.headline})),He=Object(F.a)(Ee)(oe||(oe=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subHeadline})),Be=(Object(F.a)(Ee)(ce||(ce=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.title}),(function(e){return e.theme.fonts.fontWeight.bold})),Object(F.a)(Ee)(se||(se=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.title}))),Ie=(Object(F.a)(Ee)(le||(le=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle})),Object(F.a)(Ee)(de||(de=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.large})),Object(F.a)(Ee)(ue||(ue=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.regular})),Object(F.a)(Ee)(be||(be=Object(A.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.small}))),Pe=F.a.div(pe||(pe=Object(A.a)(["\n  font-size: ",";\n  background: #fff;\n  box-shadow: 0 0 4px ",";\n  margin: 24px;\n  padding: "," ",";\n  outline: none;\n  cursor: auto;\n"])),(function(e){return e.theme.fonts.fontSize.regular}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.spacing.l})),Te=F.a.div(he||(he=Object(A.a)(["\n  -webkit-border-radius: 8px;\n  -moz-border-radius: 8px;\n  border-radius: 8px;\n  margin: 0 ",";\n  border: 1px solid ",";\n  background-color: ",";\n  width: ",";\n  height: ",";\n"])),(function(e){return e.theme.spacing.xs}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.spacing.s})),Le=F.a.div(fe||(fe=Object(A.a)(["\n  display: flex;\n  align-items: center;\n"]))),qe=function(e){var t=e.data,n=e.toggleState,i=e.toggleHandler;return Object(E.jsx)(Pe,{children:t.map((function(e){return Object(E.jsxs)(Le,{children:[Object(E.jsx)("input",{checked:n[e.id],type:"checkbox",onChange:function(){return i(e.id)}}),Object(E.jsx)(Te,{color:e.color}),Object(E.jsx)("span",{children:e.name})]},e.id)}))})},Ze=F.a.button(me||(me=Object(A.a)(["\n  background: ",";\n  border: none;\n  border-radius: 4px;\n  margin: "," 0;\n  padding: ",";\n  transition: all ease 0.2s;\n\n  &:hover {\n    background: silver;\n    color: white;\n  }\n"])),(function(e){return e.theme.colors.white}),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.spacing.m})),Qe=F.a.div(je||(je=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),Ve=F.a.div(ge||(ge=Object(A.a)(["\n  background: ",";\n  height: 100vh;\n  width: 550px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 0 ",";\n  transition: background ease 0.5s;\n"])),(function(e){return e.color}),(function(e){return e.theme.spacing.l})),Re=Object(F.a)(De)(xe||(xe=Object(A.a)(["\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.colors.white})),Je=Object(F.a)(He)(ve||(ve=Object(A.a)(["\n  padding: "," 0;\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.colors.white})),Ue=Object(F.a)(Be)(Oe||(Oe=Object(A.a)(["\n  padding: "," 0;\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.colors.white})),Ge=function(e){var t=e.onNarrativeChange;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Je,{children:"Choose a narrative"}),Object(E.jsx)(Qe,{children:Fe.map((function(e){return Object(E.jsx)(Ze,{onClick:function(){return t(e.color,e.name)},children:Object(E.jsx)(Ie,{children:e.name})},e.name)}))})]})},Ke=function(e){var t=e.narrative,n=e.data,i=e.toggleState,r=e.toggleHandler,a=e.onNarrativeChange;return t?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Ue,{children:t}),Object(E.jsx)(Ze,{onClick:function(){return a(M.colors.peach,"")},children:"Choose another Narrative"}),Object(E.jsx)(qe,{data:n,toggleState:i,toggleHandler:r})]}):Object(E.jsx)(Ge,{onNarrativeChange:a})},Xe=function(e){var t=e.narrative,n=e.data,i=e.toggleState,r=e.toggleHandler,a=e.setNarrative,o=x.useState(M.colors.peach),c=Object(Ne.a)(o,2),s=c[0],l=c[1];return Object(E.jsxs)(Ve,{color:s,children:[Object(E.jsx)(Re,{color:M.colors.white,children:"EXPLORE"}),Object(E.jsx)(Ke,{narrative:t,data:n,toggleState:i,toggleHandler:r,onNarrativeChange:function(e,t){l(e),a(t)}})]})},Ye=n(31),We=function(e){var t,n,i=e.startingCoordinates,r=e.children,a=e.mapStyle,o=x.useState({latitude:null!==(t=null===i||void 0===i?void 0:i.lat)&&void 0!==t?t:42.286,longitude:null!==(n=null===i||void 0===i?void 0:i.lng)&&void 0!==n?n:-71.088,zoom:12.1,width:"100%",height:"100%"}),c=Object(Ne.a)(o,2),s=c[0],l=c[1];return Object(E.jsx)(Ye.e,Object(ze.a)(Object(ze.a)(Object(ze.a)({},s),{touchZoom:!1,doubleClickZoom:!1}),{},{mapboxApiAccessToken:"",onViewportChange:function(e){return l(e)},mapStyle:null!==a&&void 0!==a?a:M.map.light,children:r}))},$e=(F.a.div(ye||(ye=Object(A.a)(["\n\tposition: relative;\n  height: 90vh;\n\twidth: 80vw;\n\tbox-shadow: 0 0 2px 2px black;\n\tmargin: 0 auto;\n\tmargin-bottom: 24px;\n\n\t.map {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\toverflow: visible;\n\t}\n"]))),F.a.p(_e||(_e=Object(A.a)(["\n\tfont-family: ",";\n\tfont-size: ",";\n\ttext-align: center;\n\tmargin: 24px auto;\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle})),function(e){var t=e.data,n=e.id,i=e.type,r=e.color;if(!e.visible)return null;var a={id:n,type:i,paint:"line"===i?{"line-color":r}:"fill"===i?{"fill-color":r}:void 0};return Object(E.jsx)(Ye.d,{type:"geojson",data:t,children:Object(E.jsx)(Ye.a,Object(ze.a)({},a))})});function et(e){var t=e.size,n=void 0===t?20:t,i=e.color,r={fill:void 0===i?M.colors.orange:i,stroke:"none",display:"block"};return Object(E.jsx)("svg",{height:n,viewBox:"0 0 16 16",style:r,children:Object(E.jsx)("path",{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"})})}var tt,nt,it,rt,at,ot,ct,st,lt,dt,ut,bt,pt,ht,ft,mt,jt,gt=function(e){var t=e.geoJsonData,n=e.toggleState;return Object(E.jsx)(E.Fragment,{children:t.map((function(e){return Object(E.jsx)($e,{data:e.data,id:e.id,type:e.type,color:e.color,visible:n[e.id]},e.id)}))})},xt=n(112),vt=n(77),Ot=(n(109),{});!function(e){e.Color="color",e.File="file",e.Id="id",e.Name="name"}(it||(it={})),function(e){e.Color="color",e.Id="id",e.Name="name"}(rt||(rt={})),function(e){e.Author="author",e.Id="id",e.Src="src",e.Transcript="transcript"}(at||(at={})),function(e){e.VisiblesPkey="Visibles_pkey"}(ot||(ot={})),function(e){e.BoundaryId="boundary_id",e.NarrativeId="narrative_id"}(ct||(ct={})),function(e){e.BoundaryId="boundary_id",e.NarrativeId="narrative_id"}(st||(st={})),function(e){e.BoundaryId="boundary_id",e.Color="color",e.Id="id",e.Name="name"}(lt||(lt={})),function(e){e.Alignment="alignment",e.Callback="callback",e.Description="description",e.Hidden="hidden",e.Id="id",e.Image="image",e.LocationId="location_id",e.MapAnimation="mapAnimation",e.Name="name",e.NarrativeChapterIndex="narrative_chapter_index",e.NarrativeId="narrative_id",e.RotateAnimation="rotateAnimation",e.Title="title"}(dt||(dt={})),function(e){e.Bearing="bearing",e.Center="center",e.Curve="curve",e.Id="id",e.MaxDuration="max_duration",e.MinZoom="min_zoom",e.Pitch="pitch",e.ScreenSpeed="screen_speed",e.Speed="speed",e.Zoom="zoom"}(ut||(ut={})),function(e){e.BoundaryId="boundary_id",e.Color="color",e.File="file",e.Name="name",e.NarrativeId="narrative_id"}(bt||(bt={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(pt||(pt={})),function(e){e.Alignment="alignment",e.Callback="callback",e.Description="description",e.Hidden="hidden",e.Id="id",e.Image="image",e.MapAnimation="mapAnimation",e.Name="name",e.RotateAnimation="rotateAnimation",e.Title="title"}(ht||(ht={})),function(e){e.Bearing="bearing",e.Center="center",e.Curve="curve",e.MaxDuration="max_duration",e.MinZoom="min_zoom",e.Pitch="pitch",e.ScreenSpeed="screen_speed",e.Speed="speed",e.Zoom="zoom"}(ft||(ft={})),function(e){e.Duration="duration",e.Layer="layer",e.Opacity="opacity"}(mt||(mt={})),function(e){e.ChapterEnterId="chapter_enter_id",e.ChapterExitId="chapter_exit_id",e.Duration="duration",e.Id="id",e.Layer="layer",e.Opacity="opacity"}(jt||(jt={}));var yt=Object(xt.a)(tt||(tt=Object(A.a)(["\n    query communityVideos {\n  Videos(order_by: {id: desc}) {\n    id\n    name: author\n    src\n    transcript\n  }\n}\n    "])));var _t,wt,St=Object(xt.a)(nt||(nt=Object(A.a)(["\n    query mapPage {\n  Narratives(order_by: {id: asc}) {\n    id\n    name\n    color\n    boundaries(order_by: {boundary_id: asc}) {\n      id: boundary_id\n    }\n  }\n  Boundaries {\n    id\n    name\n    data: file\n    color\n  }\n}\n    "])));var kt,Ct,zt=F.a.div(_t||(_t=Object(A.a)(["\n  display: flex;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n"]))),Nt=F.a.div(wt||(wt=Object(A.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n"]))),Mt=Me.map((function(e){return e.file})),At=Me.map((function(e){return e.id})),Ft=Mt.map((function(e){return fetch(e).then((function(e){return e.json()}))}));function Et(){var e=function(e){var t=Object(ze.a)(Object(ze.a)({},Ot),e);return vt.a(St,t)}().data,t=x.useState([]),n=Object(Ne.a)(t,2),i=n[0],r=n[1],a=x.useState([]),o=Object(Ne.a)(a,2),c=o[0],s=o[1],l=x.useState({}),d=Object(Ne.a)(l,2),u=d[0],b=d[1],p=x.useState(""),h=Object(Ne.a)(p,2),f=h[0],m=h[1],j=e||{},g=j.Narratives,v=j.Boundaries;console.log({gqlNarrative:g,gqlBoundaries:v});return x.useEffect((function(){var e=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Ft);case 3:t=e.sent,n=At.map((function(e,n){var i;return{data:t[n],name:null!==(i=t[n].name)&&void 0!==i?i:"Name missing from data",id:e,type:"line",color:Me[n].color,visible:Me[n].visible}})),r(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Explore page data fetch failed: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),x.useEffect((function(){if(void 0!==g&&void 0!==v){var e=g.filter((function(e){return e.name===f}));if(0===e.length)return;var t=e[0],n=JSON.parse(JSON.stringify(i));t.boundaries.forEach((function(e){var t=e.id;if(void 0!==t&&null!==t){var i=v.findIndex((function(e){return e.id===t})),r=v[i].name,a=n.findIndex((function(e){return e.id===r}));n[a].visible=!0}})),s(n),b(Ae(n))}else s(i),b({})}),[f,i,g,v]),Object(E.jsxs)(Y,{children:[Object(E.jsx)($,{}),Object(E.jsxs)(Nt,{children:[Object(E.jsx)(Xe,{narrative:f,data:c,toggleState:u,toggleHandler:function(e){b(Object(ze.a)(Object(ze.a)({},u),{},Object(Ce.a)({},e,!u[e])))},setNarrative:m}),Object(E.jsx)(zt,{children:Object(E.jsx)(We,{mapStyle:M.map.dark,children:Object(E.jsx)(gt,{geoJsonData:c,toggleState:u})})})]}),Object(E.jsx)(ee,{})]})}function Dt(){return Object(E.jsx)(te,{children:Object(E.jsx)("h1",{children:"Get Involved"})})}var Ht,Bt,It,Pt,Tt,Lt=F.a.div(kt||(kt=Object(A.a)(["\n    width: 100%;\n\n    @media (min-width: ",") {\n        flex-grow: 1;\n        width: 25%;\n        padding: 20px;\n        position: relative;\n    }"])),(function(e){return e.theme.mediaQuery.tablet})),qt=F.a.video(Ct||(Ct=Object(A.a)(["\n    width: 100%;\n"]))),Zt=function(e){var t=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(qt,{onClick:function(){e.onVideoClickHander(e.id)},autoPlay:e.autoplay,loop:e.loop,muted:e.muted,ref:function(e){null!=e&&(e.currentTime=0)},children:Object(E.jsx)("source",{src:e.src,type:"video/mp4"})}),Object(E.jsxs)("div",{className:"video-meta",children:[Object(E.jsx)("div",{className:"speaker-name",children:e.speakerName}),Object(E.jsx)("div",{className:"transcript",children:e.transcript})]})]}),n=Object(E.jsx)("div",{children:" error "});return Object(E.jsx)(Lt,{children:e.src?t:n})},Qt=F.a.div(Ht||(Ht=Object(A.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  width: 100%;\n"])));function Vt(){var e=function(e){var t=Object(ze.a)(Object(ze.a)({},Ot),e);return vt.a(yt,t)}(),t=e.data,n=e.loading,i=e.error,r=Object(x.useState)(-1),a=Object(Ne.a)(r,2),o=a[0],c=a[1];function s(e){c(e)}return Object(E.jsx)(te,{children:Object(E.jsx)(Qt,{children:n?Object(E.jsx)("span",{children:"Loading"}):i?Object(E.jsx)("span",{children:"Error"}):void 0===t?Object(E.jsx)("span",{children:"There's no video..."}):t.Videos.map((function(e){var t=e.id,n=e.name,i=e.src,r=e.transcript;return Object(E.jsx)(Zt,{id:t,loop:-1===o||o===t,src:i,speakerName:n,transcript:r||"No description.",autoplay:-1===o||o===t,muted:o!==t,onVideoClickHander:s},t)}))})})}var Rt,Jt=F.a.div(Bt||(Bt=Object(A.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  column-gap: ",";\n  row-gap: ",";\n  background: radial-gradient(silver, transparent 60%);\n\n  @media (min-width: ",") {\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    column-gap: ",";\n    row-gap: ",";\n  }\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.spacing.l}),(function(e){return e.theme.spacing.l})),Ut=F.a.div(It||(It=Object(A.a)(["\n  width: 100%;\n  height: 500px;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    .card-image {\n      transform: scale(1);\n    }\n    .card-info {\n      transform: translateY(-100%);\n    }\n  }\n"]))),Gt=F.a.div(Pt||(Pt=Object(A.a)(["\n  height: 100%;\n  width: 100%;\n  transform: scale(0.8);\n  transition: transform 0.2s ease-in;\n  background-image: url(",");\n  background-size: cover;\n  background-repeat: no-repeat;\n  box-shadow: 0 0 24px 0 black;\n"])),(function(e){return e.src})),Kt=F.a.span(Tt||(Tt=Object(A.a)(["\n  position: absolute;\n  color: white;\n  transform: translateY(-50%);\n  top: 50%;\n  left: 8px;\n  font-size: 48px;\n  font-family: ",";\n  z-index: 4;\n  text-shadow: 0 0 2px black;\n\n  @media (min-width: ",") {\n    font-size: 48px;\n  }\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.mediaQuery.tablet})),Xt=function(e){e.children;var t=e.color,n=e.src,i=e.title;return Object(E.jsxs)(Ut,{color:t,children:[Object(E.jsx)(Kt,{children:i}),Object(E.jsx)(Gt,{className:"card-image",src:n})]})},Yt=function(){return Object(E.jsxs)(Jt,{children:[Object(E.jsx)(Xt,{title:"About",color:M.colors.blue,src:"https://upload.wikimedia.org/wikipedia/commons/3/3b/Mattapan_M_Line_Trolley_3254.jpg",children:"More info on About"}),Object(E.jsx)(Xt,{title:"Explore",color:M.colors.peach,src:"https://cdn10.bostonmagazine.com/wp-content/uploads/sites/2/2018/12/mattapan1.jpg",children:"More info on Explore"}),Object(E.jsx)(Xt,{title:"Meet",color:M.colors.teal,src:"https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,f_jpg,g_xy_center,h_748,q_65,w_640,x_836,y_394/v1/clients/boston/Mattapan_KyleKlein_KKP11885_6575163c-84da-4e45-a1a0-e7b1f4724191.jpg",children:"Meet"}),Object(E.jsx)(Xt,{title:"Share",color:M.colors.orange,src:"https://i.pinimg.com/originals/b7/20/98/b720983ab02bbdf91e643427d17470cb.jpg",children:"More info on Share"}),Object(E.jsx)(Xt,{title:"Get Involved",color:M.colors.red,src:"https://images1.apartments.com/i2/C-nvX3YH0OZYtCUKBXUSgYr9XOvRY4U8cKwa-F2isvg/111/78-mattapan-st-unit-1-boston-ma-exterior.jpg",children:"More info on Get Involved"}),Object(E.jsx)(Xt,{title:"Contact Us?",color:M.colors.brown,src:"https://scontent-bos3-1.xx.fbcdn.net/v/t1.6435-9/p960x960/120760232_3847173248643441_4683888836416691032_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=36a2c1&_nc_ohc=CFsgtqppGvcAX_ZnzNE&_nc_ht=scontent-bos3-1.xx&oh=dc1f7a638e4cc2fcf5150610c79d1c42&oe=618D5C99",children:"More info on Contact Us?"})]})},Wt=F.a.video(Rt||(Rt=Object(A.a)(["\n    width: 100%;\n    box-shadow: 0 0 24px 0 black;\n    border-radius: 4px;\n"]))),$t=function(){return Object(E.jsx)(Wt,{autoPlay:!0,muted:!0,loop:!0,preload:"auto",playsInline:!0,src:"https://assets.mixkit.co/videos/preview/mixkit-daytime-city-traffic-aerial-view-56-large.mp4"})};function en(){return Object(E.jsxs)(te,{children:[Object(E.jsx)($t,{}),Object(E.jsx)(Yt,{})]})}function tn(){return Object(E.jsx)(te,{children:Object(E.jsx)("h1",{children:"Share"})})}n(95),n(96);var nn,rn,an=function(){return null},on=n(65);function cn(e){var t=e.id,n=e.content,i=e.title,r=e.image,a=e.isActive,o=e.hidden,c=e.alignment;return Object(E.jsx)("div",{id:t,className:"step ".concat(a?"active":""," ").concat(c," ").concat(o?"hidden":""),children:Object(E.jsxs)("div",{className:"light",children:[Object(E.jsx)("h3",{children:i}),Object(E.jsx)("img",{src:r,alt:""}),Object(E.jsx)("p",{children:n})]})})}var sn=F.a.header(nn||(nn=Object(A.a)(["\n  margin: auto;\n  width: 100%;\n  position: relative;\n  z-index: 5;\n"]))),ln=F.a.footer(rn||(rn=Object(A.a)(["\n  width: 100%;\n  min-height: 5vh;\n  padding-top: 2vh;\n  padding-bottom: 2vh;\n  text-align: center;\n  line-height: 25px;\n  font-size: 13px;\n  position: relative;\n  z-index: 5;\n"])));function dn(e){var t=e.title,n=e.subtitle,i=e.byline;return Object(E.jsxs)(sn,{id:"header",className:"dark",children:[Object(E.jsx)("h1",{children:t}),Object(E.jsx)("h2",{children:n}),Object(E.jsx)("p",{children:i})]})}function un(e){var t=e.footerHtml;return Object(E.jsx)(ln,{id:"footer",className:"dark",children:Object(E.jsx)("p",{dangerouslySetInnerHTML:{__html:t}})})}var bn={fill:["fill-opacity"],line:["line-opacity"],circle:["circle-opacity","circle-stroke-opacity"],symbol:["icon-opacity","text-opacity"],raster:["raster-opacity"],"fill-extrusion":["fill-extrusion-opacity"],heatmap:["heatmap-opacity"]},pn={left:"lefty",center:"centered",right:"righty",full:"fully"};function hn(e){var t=e.onMarkerCoordsChange,n=e.chapterData,i=e.headerTitle,r=e.headerSubtitle,a=e.headerByline,o=e.footerHtml,c=e.showMarkers,s=e.toggleLayer,l=v.a.useState(""),d=Object(Ne.a)(l,2),u=d[0],b=d[1],p=v.a.useContext(Ye.b).map,h=v.a.useState(p.current),f=Object(Ne.a)(h,2),m=f[0],j=f[1];function g(e){var t=e.layer,n=e.duration,i=e.opacity;if(m){var r=function(e){if(m){var t,n=null===(t=m.getLayer(e))||void 0===t?void 0:t.type;return bn[n]}}(t);null===r||void 0===r||r.forEach((function(e){var r={};if(n){var a="".concat(e,"-transition");r={duration:n},m.setPaintProperty(t,a,r)}m.setPaintProperty(t,e,i,r)}))}}v.a.useEffect((function(){var e;j(null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.getMap())}),[p]);var x=n.map((function(e,t){return Object(E.jsx)(on.b,{data:e.id,children:Object(E.jsx)("div",{children:Object(E.jsx)(cn,{id:e.id,title:e.title,content:e.description,image:e.image,alignment:pn[e.alignment]||"centered",hidden:e.hidden,isActive:e.id===u},e.id)})},e.id)}));return Object(E.jsxs)("div",{id:"story",children:[Object(E.jsx)(dn,{title:i,subtitle:r,byline:a}),Object(E.jsx)("div",{id:"features",style:{paddingTop:"10vh",paddingBottom:"10vh"},children:Object(E.jsx)(on.a,{onStepEnter:function(e){var i=e.data;b(i);var r=n.find((function(e){return e.id===i}));m&&m[r.mapAnimation||"flyTo"](r.location),c&&t(r.location.center),r.onChapterEnter.length>0&&r.onChapterEnter.forEach((function(e){s(e.layer),g(e)})),r.callback,r.rotateAnimation&&m&&m.once("moveend",(function(){var e=m.getBearing();m.rotateTo(e+180,{duration:3e4,easing:function(e){return e}})}))},onStepExit:function(e){var t=e.data,i=n.find((function(e){return e.id===t}));i.onChapterExit.length>0&&i.onChapterExit.forEach((function(e){s(e.layer),g(e)}))},offset:.5,children:x})}),Object(E.jsx)(un,{footerHtml:o})]})}n(97);var fn=Me.map((function(e){return e.file})),mn=Me.map((function(e){return e.id})),jn=fn.map((function(e){return fetch(e).then((function(e){return e.json()}))})),gn={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n    query ChaptersList {\n        chapters: storytelling_chapter(order_by: {id: asc}) {\n            id: name\n            alignment\n            hidden\n            title\n            image\n            description\n            location {\n                center\n                zoom\n                pitch\n                bearing\n                curve\n                max_duration\n                min_zoom\n                screen_speed\n                speed\n            }\n            mapAnimation\n            rotateAnimation\n            callback\n            onChapterEnter {\n                layer\n                opacity\n                duration\n            }\n            onChapterExit {\n                layer\n                opacity\n                duration\n            }\n        }\n    }"})},xn="mapbox://styles/mattapan-mapping/cl1mtp3gy000k14mblgpwmoh8",vn="",On=!0,yn="#3FB1CE",_n="The Title Text of this Story",wn="A descriptive and interesting subtitle to draw in the reader",Sn="By a Digital Storyteller",kn='Source: source citations, etc. <br> Created using <a href="https://github.com/mapbox/storytelling" target="_blank">Mapbox Storytelling</a> template.',Cn=[{id:"slug-style-id",alignment:"left",hidden:!1,title:"Base Title",image:"./path/to/image/source.png",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",location:{center:[-71.0869,42.27],zoom:12,pitch:60,bearing:0},mapAnimation:"flyTo",rotateAnimation:!1,callback:"",onChapterEnter:[{layer:"river-st-corridor",opacity:1,duration:5e3},{layer:"transportLayer",opacity:1,duration:5e3},{layer:"cummimnsHwyCorridor",opacity:1,duration:5e3}],onChapterExit:[{layer:"river-st-corridor",opacity:0},{layer:"transportLayer",opacity:0,duration:5e3},{layer:"cummimnsHwyCorridor",opacity:0,duration:5e3}]},{id:"second-identifier",alignment:"right",hidden:!1,title:"Second Title",image:"./path/to/image/source.png",description:"Copy these sections to add to your story.",location:{center:[-71.0869,42.27],zoom:12,pitch:60,bearing:0},mapAnimation:"flyTo",rotateAnimation:!0,callback:"",onChapterEnter:[{layer:"zoning-subdistricts",opacity:1,duration:1e3},{layer:"mattapanPlanBoundary",opacity:1,duration:1e3}],onChapterExit:[{layer:"zoning-subdistricts",opacity:0},{layer:"mattapanPlanBoundary",opacity:0,duration:1e3}]}],zn=function(e){var t=-1!==(null===e||void 0===e?void 0:e.indexOf("?"));return{url:e+(t?"&pluginName=scrollytellingV2":"?pluginName=scrollytellingV2")}},Nn=function(e){var t,n,i,r,a,o=v.a.useState([]),c=Object(Ne.a)(o,2),s=c[0],l=c[1],d=v.a.useState(Cn[0].location.center),u=Object(Ne.a)(d,2),b=u[0],p=u[1],h=v.a.useState([]),f=Object(Ne.a)(h,2),m=f[0],j=f[1],g=v.a.useState({}),x=Object(Ne.a)(g,2),O=x[0],y=x[1],_=v.a.useRef({}),w=function(e){_.current=e,y(e)},S=v.a.useState({longitude:null!==(t=Cn[0].location.center[0])&&void 0!==t?t:-71.088,latitude:null!==(n=Cn[0].location.center[1])&&void 0!==n?n:42.286,zoom:null!==(i=Cn[0].location.zoom)&&void 0!==i?i:12.1,bearing:null!==(r=Cn[0].location.bearing)&&void 0!==r?r:0,pitch:null!==(a=Cn[0].location.pitch)&&void 0!==a?a:0,width:"100%",height:"100%"}),k=Object(Ne.a)(S,1)[0],C=v.a.createRef();return v.a.useEffect((function(){var e=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("",gn).then((function(e){return e.json()}));case 3:t=e.sent,n=t.data,l(n.chapters),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),l(Cn),console.error("Story map page failed to fetch config data from graphql",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(jn);case 3:t=e.sent,n=mn.map((function(e,n){var i;return{data:t[n],name:null!==(i=t[n].name)&&void 0!==i?i:"Name missing from data",id:e,type:"line",color:Me[n].color,visible:Me[n].visible}})),j(n),w(Object(ze.a)(Object(ze.a)({},Ae(n)),_.current)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Map Story data fetch failed: "+e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();t(),e()}),[]),Object(E.jsxs)(Ye.b.Provider,{value:{map:C,container:null,isDragging:!1,eventManager:void 0},children:[Object(E.jsxs)(Ye.e,Object(ze.a)(Object(ze.a)({style:{top:0,height:"100vh",width:"100vw",position:"fixed"},mapStyle:xn},k),{},{transformRequest:zn,mapboxApiAccessToken:vn||"",ref:C,children:[Object(E.jsx)(Ye.c,{longitude:b[0],latitude:b[1],offsetLeft:-32,offsetTop:-32,children:Object(E.jsx)(et,{size:32,color:yn})}),Object(E.jsx)(gt,{geoJsonData:m,toggleState:O})]})),Object(E.jsx)(hn,{onMarkerCoordsChange:function(e){e[0]===b[0]&&e[1]===b[1]||p(e)},chapterData:s,headerTitle:_n,headerSubtitle:wn,headerByline:Sn,footerHtml:kn,showMarkers:On,toggleLayer:function(e){w(Object(ze.a)(Object(ze.a)({},_.current),{},Object(Ce.a)({},e,!_.current[e])))}})]})},Mn=function(){return Object(E.jsx)("h1",{children:"Path Not Recognized"})},An=function(){return Object(E.jsxs)(w.c,{children:[Object(E.jsx)(w.a,{path:"/",element:Object(E.jsx)(en,{})}),Object(E.jsx)(w.a,{path:"/about",element:Object(E.jsx)(ne,{})}),Object(E.jsx)(w.a,{path:"/explore",element:Object(E.jsx)(Et,{})}),Object(E.jsx)(w.a,{path:"/story",element:Object(E.jsx)(Nn,{})}),Object(E.jsx)(w.a,{path:"/meet",element:Object(E.jsx)(Vt,{})}),Object(E.jsx)(w.a,{path:"/share",element:Object(E.jsx)(tn,{})}),Object(E.jsx)(w.a,{path:"/act",element:Object(E.jsx)(Dt,{})}),Object(E.jsx)(w.a,{path:"/contact",element:Object(E.jsx)(ie,{})}),Object(E.jsx)(w.a,{path:"*",element:Object(E.jsx)(Mn,{})})]})};function Fn(){return Object(E.jsxs)(k.a,{client:N,children:[Object(E.jsx)(an,{}),Object(E.jsx)(_.b,{theme:M,children:Object(E.jsx)(S.a,{children:Object(E.jsx)(An,{})})})]})}n(98).config(),y.a.render(Object(E.jsx)(v.a.StrictMode,{children:Object(E.jsx)(Fn,{})}),document.getElementById("root"))},86:function(e,t,n){},97:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.2de5ebed.chunk.js.map